@model NoticeBoardModel
@using System.Collections.Generic
@using ERP.MODEL

@{
    ViewBag.Title = "Notice board for All";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var NoticeFileUploadList = (List<NoticeBoardModel>)ViewBag.NoticeFileUploadList;
    //var TrimsListForEdit = ViewBag.TrimsListForEdit;

    //string vMessage = "";
    //if (TempData.ContainsKey("OperationMessage"))
    //{
    //    vMessage = TempData["OperationMessage"].ToString();
    //}
}



<div class="col-md-12">
    <div class="panel panel-card margin-b-30">
        <div class="panel-heading panel-heading-custom">
            <h4 class="panel-title">NOTICE BOARD</h4>
        </div>

        @*<div class="form-group">

                @using (Html.BeginForm("ViewPDFinPage", "NoticeBoard", FormMethod.Post))
                {
                    <a href="javascript:;" onclick="document.forms[0].submit();">View PDF</a>
                            <hr />
                            @Html.Raw(TempData["Embed"])
                }

            </div>*@



        @*@if (!string.IsNullOrWhiteSpace(vMessage))
            {
                <div class="row alert alert-success alert-dismissable alert-custom">
                    <button aria-hidden="true" data-dismiss="alert" class="close close-custom" type="button">×</button>
                    <span class="success-msg">@vMessage</span>
                </div>
            }*@

        <div class="panel-body">
            @*@using (Html.BeginForm("NoticeFileForAll", "NoticeBoard", FormMethod.Get, new { @class = "form-horizontal", @style = "border: 1px solid #777;padding: 50px 20px 20px 10px;", role = "form" }))*@
            @using (Html.BeginForm("NoticeFileForAll", "NoticeBoard", FormMethod.Get, new { @class = "form-horizontal", role = "form" }))
            {
                <div class="form-group">

                  
                    <button class="btn btn-md btn-info btn-default" style="/* margin-left: 385px; *//* margin-bottom: 1%; */width: 8%; margin-left: 226px; position: relative;" type="submit" value="" name="btnAll">
                        <i class="fa fa-2x"></i> All
                    </button>
                    <button class="btn btn-md btn-info btn-default" style="/* margin-left: 14px; *//* margin-bottom: 1%; */width: 8%;" type="submit" value="3" name="btnPolicy">
                        <i class="fa fa-2x"></i> Policy
                    </button>

                    <button class="btn btn-md btn-info btn-default" style="/* margin-left: 14px; *//* margin-bottom: 1%; */width: 8%;" type="submit" value="4" name="btnKPI">
                        <i class="fa fa-2x"></i> KPI
                    </button>
                    <button class="btn btn-md btn-info btn-default" style="/* margin-left: 14px; *//* margin-bottom: 1%; */width: 8%;" type="submit" value="2" name="btnHoliday">
                        <i class="fa fa-2x"></i> Holiday
                    </button>
                    <button class="btn btn-md btn-info btn-default" style="/* margin-left: 14px; *//* margin-bottom: 1%; */width: 8%;" type="submit" value="5" name="btnIdCard">
                        <i class="fa fa-2x"></i> ID Card
                    </button>
                    <button class="btn btn-md btn-info btn-default" style="/* margin-left: 14px; *//* margin-bottom: 1%; */width: 8%;" type="submit" value="8" name="btnTraining">
                        <i class="fa fa-2x"></i> Training
                    </button>
                    <button class="btn btn-md btn-info btn-default" style="/* margin-left: 14px; *//* margin-bottom: 1%; */width: 8%;" type="submit" value="6" name="btnBonusPoint">
                        <i class="fa fa-2x"></i> Bonus Point
                    </button>
                    <button class="btn btn-md btn-info btn-default" style="/* margin-left: 14px; *//* margin-bottom: 1%; */width: 8%;" type="submit" value="7" name="btnRecruit">
                        <i class="fa fa-2x"></i> Recruit
                    </button>
                </div>


                <div class="form-group">
                    <label class="col-lg-1 control-label text-right" style="padding-top: 4px;width: 30%;">From Date:</label>
                    <div class="col-lg-5">
                        @Html.TextBoxFor(m => m.FromDate, new { @class = "form-control datepicker", @placeholder = "Please select a date", @id = "FromDate" })
                    </div>



                </div>

                <div class="form-group">


                    <label class="col-lg-1 control-label text-right" style="padding-top: 4px;width: 30%;">To Date:</label>
                    <div class="col-lg-5">
                        @Html.TextBoxFor(m => m.ToDate, new { @class = "form-control datepicker", @placeholder = "Please select a date", @id = "ToDate" })
                    </div>
                </div>





                @*@Html.AntiForgeryToken();*@
                @*<div class="form-group">
                        <div class="col-lg-offset-1">
                            <button class="btn btn-md btn-info btn-search" type="submit" style="margin-left: 354px;">
                                <i class="fa fa-search"></i> Search
                            </button>

                            <a href="@Url.Action("NoticeFileForAll", "NoticeBoard" )" class="btn btn-md btn-warning btn-clear">
                                <i class="fa fa-circle-o-notch"></i> Clear Search
                            </a>

                        </div>
                    </div>*@


            }


            <div class="resp-container" style="width: 55%; left: 20%; margin-bottom: 20px;">
                <iframe class="resp-iframe" src="@Url.Action("DisplayPDF", "NoticeBoard")" gesture="media" allow="encrypted-media" allowfullscreen></iframe>
            </div>

            <style>
                .resp-container {
                    position: relative;
                    overflow: hidden;
                    padding-top: 56.25%;
                }
                .resp-iframe {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    border: 0;
                }
            </style>




            @if (ViewBag.NoticeFileUploadList != null)
            {
                <div class="table-responsive">
                    <table class="table table-bordered table-striped table-custom">
                        <thead>
                            <tr>
                                <th style="width: 7%;">View Notice</th>
                                <th style="text-align: center">Date</th>
                                <th style="text-align: center;width: 46%;">Title</th>
                                <th style="text-align: center">Notice Type</th>
                                <th style="text-align: center">File Name</th>

                            </tr>
                        </thead>
                        <tbody>
                            @{
                                foreach (var notice in NoticeFileUploadList)
                                {
                                    <tr>
                                        <td style="text-align: center">
                                            @using (Html.BeginForm("NoticeFileUpload", "NoticeBoard", FormMethod.Get, new { @class = "form-horizontal pull-left", role = "form", @target = "blank" }))
                                            {
                                                <input type="hidden" name="pViewFlag" value="1" />
                                                <input type="hidden" name="pNoticeId" value="@notice.NoticeId" />
                                                    <input type="hidden" name="pNoticeDate" value="@notice.NoticeDate" />
                                                    <input type="hidden" name="pNoticeTypeId" value="@notice.NoticeTypeId" />

                                                    <button class="btn btn-md btn-success btn-edit" type="submit" style="margin-right: 10px">
                                                        <i class="fa fa-eye"></i>  View
                                                    </button>
                                            }
                                        </td>
                                        <td style="text-align: center">@notice.NoticeDate</td>
                                        <td style="text-align: center">@notice.NoticeTitle</td>
                                        <td style="text-align: center">@notice.NoticeTypeName</td>
                                        <td style="text-align: center">@notice.NoticeBoardImageModel.FileName</td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>

                </div>
              }
        </div>
    </div>
</div>





@section Scripts{
    @Scripts.Render("~/bundles/jqueryval")
    <script>

        $(document).ready(function () {
            var btnName = localStorage.getItem("btnName");
            if (btnName) {
                $('.btn-save').html('<i class="fa fa-edit"></i> ' + btnName);
                localStorage.removeItem("btnName");
            }
            $(".btn-edit").click(function () {
                localStorage.setItem("btnName", "Update");
            });

            var date = new Date();
            var firstDay = new Date(date.getFullYear(), date.getMonth(), 1);
            var lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0);

            $('#FromDate').val(("0" + firstDay.getDate()) + '/' + (firstDay.getMonth() + 1) + '/' + firstDay.getFullYear());
            $('#ToDate').val((lastDay.getDate()) + '/' + (lastDay.getMonth() + 1) + '/' + lastDay.getFullYear());

        });








    </script>



}


