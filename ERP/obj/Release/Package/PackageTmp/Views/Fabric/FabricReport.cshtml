@using ERP.MODEL
@model ReportFabricModel

@{
    ViewBag.Title = "Fabric Report";

    string vMessage = "";
    if (TempData.ContainsKey("OperationMessage"))
    {
        vMessage = TempData["OperationMessage"].ToString();
    }
}

@using (Html.BeginForm("FabricReport", "Fabric", FormMethod.Post, new { @class = "form-horizontal", role = "form", id = "__AjaxAntiForgeryForm" }))
{
    @Html.AntiForgeryToken()

<div class="col-md-12">
    <div class="panel panel-card margin-b-30">
        <div class="panel-heading panel-heading-custom">
            <h4 class="panel-title">FABRIC REPORT</h4>

            <span class="pull-right" style="position: relative; top: -20px;">
                <label>
                    <input type="radio" name="ReportType" value="PDF" checked="checked"> PDF
                </label> &nbsp;
                <label>
                    <input type="radio" name="ReportType" value="Excel"> Excel
                </label> &nbsp;
                <label>
                    <input type="radio" name="ReportType" value="CSV"> CSV
                </label> &nbsp;
                <label>
                    <input type="radio" name="ReportType" value="DOC"> Word
                </label>
            </span>
        </div>



        @if (!string.IsNullOrWhiteSpace(vMessage))
        {
            <div class="row alert alert-success alert-dismissable alert-custom">
                <button aria-hidden="true" data-dismiss="alert" class="close close-custom" type="button">×</button>
                <span class="success-msg">@vMessage</span>
            </div>
        }

        <div class="panel-body">


                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            @Html.LabelFor(m => m.FromDate, new { @class = "col-lg-3 control-label" })
                            <div class="col-lg-4">
                                @Html.TextBoxFor(m => m.FromDate, new { @class = "form-control datepicker", @placeholder = "DD/MM/YYYY (Ex: 01/12/2018)" })
                                @Html.ValidationMessageFor(m => m.FromDate, "", new { @class = "text-danger FromDateError" })
                            </div>
                            <div class="col-lg-1">
                                <span class="required">*</span>
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(m => m.ToDate, new { @class = "col-lg-3 control-label" })
                            <div class="col-lg-4">
                                @Html.TextBoxFor(m => m.ToDate, new { @class = "form-control datepicker", @placeholder = "DD/MM/YYYY (Ex: 31/12/2018)" })
                                @Html.ValidationMessageFor(m => m.ToDate, "", new { @class = "text-danger ToDateError" })
                            </div>
                            <div class="col-lg-1">
                                <span class="required">*</span>
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(m => m.SupplierId, new { @class = "col-lg-3 control-label" })
                            <div class="col-lg-4">
                                @Html.DropDownListFor(m => m.SupplierId, ViewBag.SupplierDDList as SelectList, new { @class = "form-control" })
                                @Html.ValidationMessageFor(m => m.SupplierId, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(m => m.FabricCode, new { @class = "col-lg-3 control-label" })
                            <div class="col-lg-4">
                                @Html.TextBoxFor(m => m.FabricCode, new { @class = "form-control", @placeholder = "Enter fabric code" })
                                @Html.ValidationMessageFor(m => m.FabricCode, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-lg-offset-3 col-lg-10">
                                <button class="btn btn-md btn-info" type="submit">
                                    <i class="fa fa-search"></i> View
                                </button>
                            </div>
                        </div>

                    </div>
                </div>
          
        </div>
    </div>
</div>
}

@section Scripts {
    <script>
        $(document).ready(function () {

            var today = new Date();
            var lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0);
            var mm = today.getMonth() + 1;
            var yyyy = today.getFullYear();

            if (mm < 10) {
                mm = '0' + mm;
            }

            var firstDate = '01/' + mm + '/' + yyyy;
            var lastDate = lastDay.getDate() + '/' + mm + '/' + yyyy;

            $('#FromDate').val(firstDate);
            $('#ToDate').val(lastDate);


        });
    </script>
}